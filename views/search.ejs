<section class="filter row">
    <div class="btn-group div-centered">
        <form action="filter" method="post" class="form-inline">
                <select name="taskOption">
                        <%  var rooms = 13; %>
                        <% for (var i = 0; i < rooms; i++){ %>
                            <option value=<%= i %>> <%= i %>+ Beds</option>
                        <% } %>
                </select>
            <input type="submit" class="btn btn-primary" value="Apply Filter">
        </form>
    </div>
</section>

<section class="sort row">
    <div class="btn-group div-centered">
        Sort results by:
        <form action="<%= fa17g09_env_prefix %>/search" method="post" class="form-inline">
                <select name="sortOption">
                    <%
                    var optionsMap = new Map();
                    optionsMap.set("price ASC", "Price (low to high)");
                    optionsMap.set("price DESC", "Price (high to low)");
                    optionsMap.set("numBedrooms DESC", "Number of Bedrooms (descending)");
                    optionsMap.set("numBedrooms ASC", "Number of Bedrooms (ascending)");
                    optionsMap.set("squareFeet DESC", "SqFt (descending)");
                    optionsMap.set("squareFeet ASC", "SqFt (ascending)");

                    for (var [key, value] of optionsMap) {
                        var selected = "";
                        if (locals.previousSortOption) {
                            if  (locals.previousSortOption == key){
                                selected = 'selected="selected"';
                            }
                        }

                        %><option value="<%= key %>" <%= selected %>><%= value %></option><%
                    }
                    %>
                </select>
                <input name="city" type="hidden" value="<% if (locals.previousSearchString) { %><%=previousSearchString %><%}%>"/>
            <input type="submit" value="Sort" class="btn btn-primary">
        </form>
    </div>
</section>

<h1><%= title %></h1>
<p>Welcome to <%= title %></p>

<section class="row">
    <div class="results">
        <%listings.forEach(function(listing) { %>
            <div class="thumbnail">
                <img src=<%= listing.thumbnail %> class="img-responsive" />
                <div class="caption">
                    <p>City: <%= listing.city %> </p>
                    <p>State: <%= listing.state %> </p>
                    <p>Price: <%= listing.price %> </p>
                    <p>Number of Bedrooms: <%= listing.numBedrooms %> </p>
                </div>
            </div>
        <% }) %>
    </div>
</section>
